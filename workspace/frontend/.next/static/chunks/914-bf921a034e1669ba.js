"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{8914:function(e,t,s){s.d(t,{ChatInterface:function(){return T}});var n=s(7437),a=s(2265),r=s(4539),i=s(5127),o=s(3907),l=s(8145),c=s(9581),d=s(4388),u=s(2022),m=s(4109),x=s(5862),p=s(24),h=s(560),g=s(7515);function f(e){var t;let{message:s,isLatest:a=!1}=e,i="user"===s.type;s.type;let l="result"===s.type;return(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-4 ".concat(i?"flex-row-reverse":"flex-row"," mb-6"),children:[(0,n.jsx)("div",{className:"flex-shrink-0 ".concat(i?"ml-4":"mr-4"),children:i?(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-routix-purple to-routix-purple-light flex items-center justify-center",children:(0,n.jsx)(u.Z,{className:"w-5 h-5 text-white"})}):(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/80 backdrop-blur-xl shadow-lg flex items-center justify-center",children:(0,n.jsx)(c.T,{className:"w-6 h-6"})})}),(0,n.jsx)("div",{className:"flex-1 max-w-2xl ".concat(i?"text-right":"text-left"),children:i?(0,n.jsxs)(o.W,{className:"p-4 bg-gradient-to-r from-routix-purple/20 to-routix-purple-light/20",children:[(0,n.jsx)("p",{className:"text-text-primary font-medium",children:s.content}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,n.jsx)("span",{className:"text-xs text-text-muted",children:new Date(s.timestamp).toLocaleTimeString()}),"sending"===s.status&&(0,n.jsx)(m.Z,{className:"w-3 h-3 animate-spin text-text-muted"}),"sent"===s.status&&(0,n.jsx)(x.Z,{className:"w-3 h-3 text-green-500"})]})]}):(0,n.jsx)("div",{className:"space-y-3",children:(0,n.jsx)(o.W,{className:"p-6",children:l&&(null===(t=s.result)||void 0===t?void 0:t.image_url)?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"w-5 h-5 text-green-500"}),(0,n.jsx)("span",{className:"font-semibold text-text-primary",children:"Your thumbnail is ready! \uD83C\uDF89"})]}),(0,n.jsx)("div",{className:"rounded-2xl overflow-hidden bg-white/20 p-2",children:(0,n.jsx)("img",{src:s.result.image_url,alt:"Generated thumbnail",className:"w-full h-auto rounded-xl shadow-lg"})}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm text-text-secondary",children:[(0,n.jsxs)("span",{children:["Processing time: ",s.result.processing_time||0,"s"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)("button",{className:"px-3 py-1 rounded-lg bg-white/30 hover:bg-white/50 transition-colors flex items-center gap-1",children:[(0,n.jsx)(p.Z,{className:"w-3 h-3"}),"Download"]}),(0,n.jsxs)("button",{className:"px-3 py-1 rounded-lg bg-white/30 hover:bg-white/50 transition-colors flex items-center gap-1",children:[(0,n.jsx)(h.Z,{className:"w-3 h-3"}),"Share"]})]})]})]}):(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-text-primary",children:"Routix AI"}),s.status&&(0,n.jsx)(d.O,{status:s.status})]}),(0,n.jsx)("p",{className:"text-text-primary leading-relaxed",children:s.content}),"failed"===s.status&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-red-500",children:[(0,n.jsx)(g.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"text-sm",children:"Generation failed"})]})]})})})})]})}var v=s(933),b=s(1240);function j(e){let{progress:t,className:s}=e,a=e=>e?e<60?"".concat(e,"s"):"".concat(Math.floor(e/60),"m ").concat(e%60,"s"):"--";return(0,n.jsx)(o.W,{className:"p-4 ".concat(s),children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(t.status){case"queued":return(0,n.jsx)(v.Z,{className:"w-5 h-5 text-blue-500"});case"processing":return(0,n.jsx)(m.Z,{className:"w-5 h-5 text-routix-purple animate-spin"});case"completed":return(0,n.jsx)(x.Z,{className:"w-5 h-5 text-green-500"});case"failed":return(0,n.jsx)(g.Z,{className:"w-5 h-5 text-red-500"});default:return(0,n.jsx)(m.Z,{className:"w-5 h-5 text-gray-400 animate-spin"})}})(),(0,n.jsx)("span",{className:"font-semibold ".concat((()=>{switch(t.status){case"queued":return"text-blue-600";case"processing":return"text-routix-purple";case"completed":return"text-green-600";case"failed":return"text-red-600";default:return"text-gray-600"}})()),children:(()=>{switch(t.status){case"queued":return"In Queue";case"processing":return"Generating...";case"completed":return"Completed";case"failed":return"Failed";default:return"Unknown"}})()})]}),t.processing_time&&(0,n.jsx)("span",{className:"text-sm text-text-muted",children:a(t.processing_time)})]}),("processing"===t.status||"queued"===t.status)&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-text-secondary",children:"Progress"}),(0,n.jsxs)("span",{className:"text-text-primary font-medium",children:[t.progress,"%"]})]}),(0,n.jsx)("div",{className:"w-full bg-white/30 rounded-full h-2 overflow-hidden",children:(0,n.jsx)(r.E.div,{className:"h-2 bg-gradient-to-r from-routix-purple to-routix-purple-light rounded-full",initial:{width:0},animate:{width:"".concat(t.progress,"%")},transition:{duration:.5,ease:"easeOut"}})})]}),"queued"===t.status&&t.queue_position&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,n.jsx)(b.Z,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["Position ",t.queue_position," in queue"]})]}),t.estimated_time&&"completed"!==t.status&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[(0,n.jsx)(v.Z,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:["Est. ",a(t.estimated_time)," remaining"]})]}),"failed"===t.status&&t.error_message&&(0,n.jsx)("div",{className:"p-3 rounded-xl bg-red-500/10 border border-red-500/20",children:(0,n.jsx)("p",{className:"text-sm text-red-600",children:t.error_message})}),"completed"===t.status&&(0,n.jsx)("div",{className:"p-3 rounded-xl bg-green-500/10 border border-green-500/20",children:(0,n.jsx)("p",{className:"text-sm text-green-600",children:"✨ Thumbnail generated successfully!"})})]})})}var y=s(6160),w=s(5984),N=s(8604),k=s(2365),_=s(3541),C=s(3191),D=s(5524),A=s(6264),S=s(7776),E=s(5040);class Z{connect(e){var t;null!==(t=this.socket)&&void 0!==t&&t.connected||(this.socket=(0,E.io)("ws://localhost:8000",{auth:{token:e},transports:["websocket"],reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:this.reconnectDelay}),this.setupEventHandlers())}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{console.log("✅ WebSocket connected"),this.reconnectAttempts=0,this.emit("connection:established",{connected:!0})}),this.socket.on("disconnect",e=>{console.log("❌ WebSocket disconnected:",e),this.emit("connection:lost",{reason:e})}),this.socket.on("connect_error",e=>{console.error("❌ WebSocket connection error:",e),this.reconnectAttempts++,this.reconnectAttempts>=this.maxReconnectAttempts&&this.emit("connection:failed",{error:e})}),this.socket.on("generation_started",e=>{console.log("\uD83D\uDE80 Generation started:",e),this.emit("generation:started",e)}),this.socket.on("generation_progress",e=>{console.log("\uD83D\uDCCA Generation progress:",e),this.emit("generation:progress",e)}),this.socket.on("generation_completed",e=>{console.log("✅ Generation completed:",e),this.emit("generation:completed",e)}),this.socket.on("generation_failed",e=>{console.log("❌ Generation failed:",e),this.emit("generation:failed",e)}),this.socket.on("queue_position",e=>{console.log("\uD83D\uDCCD Queue position updated:",e),this.emit("generation:queue_update",e)}))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.listeners.clear()}subscribeToGeneration(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&this.socket.emit("subscribe_generation",{generation_id:e})}unsubscribeFromGeneration(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.connected)&&this.socket.emit("unsubscribe_generation",{generation_id:e})}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){var s;null===(s=this.listeners.get(e))||void 0===s||s.delete(t)}emit(e,t){var s;null===(s=this.listeners.get(e))||void 0===s||s.forEach(e=>{try{e(t)}catch(e){console.error("Error in WebSocket event callback:",e)}})}get isConnected(){var e;return(null===(e=this.socket)||void 0===e?void 0:e.connected)||!1}get connectionId(){var e;return null===(e=this.socket)||void 0===e?void 0:e.id}constructor(){this.socket=null,this.listeners=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}}let G=new Z;var I=s(7651);function T(){let[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)(""),u=(0,a.useRef)(null),x=(0,a.useRef)(null),{mutate:p,isPending:h}=function(){let e=(0,C.NL)();return(0,D.D)({mutationFn:A.x.createGeneration,onSuccess:t=>{S.Am.success("Thumbnail generation started!"),e.invalidateQueries({queryKey:["generations"]})},onError:e=>{var t,s;S.Am.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to start generation")}})}(),{generations:g,isConnected:v,subscribeToGeneration:b,getGenerationStatus:E}=function(){let{user:e}=(0,I.a)(),[t,s]=(0,a.useState)(new Map),[n,r]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(e){let e=localStorage.getItem("access_token");e&&G.connect(e)}return()=>{G.disconnect()}},[e]),(0,a.useEffect)(()=>{let e=()=>{r(!0)},t=()=>{r(!1)},n=()=>{r(!1)},a=e=>{s(t=>new Map(t.set(e.generation_id,e)))},i=e=>{s(t=>new Map(t.set(e.generation_id,e)))},o=e=>{s(t=>new Map(t.set(e.generation_id,e)))},l=e=>{s(t=>new Map(t.set(e.generation_id,e)))},c=e=>{s(t=>{let s=t.get(e.generation_id);return s?new Map(t.set(e.generation_id,{...s,...e})):t})};return G.on("connection:established",e),G.on("connection:lost",t),G.on("connection:failed",n),G.on("generation:started",a),G.on("generation:progress",i),G.on("generation:completed",o),G.on("generation:failed",l),G.on("generation:queue_update",c),()=>{G.off("connection:established",e),G.off("connection:lost",t),G.off("connection:failed",n),G.off("generation:started",a),G.off("generation:progress",i),G.off("generation:completed",o),G.off("generation:failed",l),G.off("generation:queue_update",c)}},[]);let i=(0,a.useCallback)(e=>{G.subscribeToGeneration(e)},[]),o=(0,a.useCallback)(e=>{G.unsubscribeFromGeneration(e),s(t=>{let s=new Map(t);return s.delete(e),s})},[]),l=(0,a.useCallback)(e=>t.get(e),[t]);return{generations:Array.from(t.values()),isConnected:n,subscribeToGeneration:i,unsubscribeFromGeneration:o,getGenerationStatus:l}}(),Z=()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{Z()},[e]),(0,a.useEffect)(()=>{g.forEach(e=>{t(t=>t.map(t=>t.generationId===e.generation_id?"completed"===e.status&&e.thumbnail_url?{...t,type:"result",status:"completed",content:"Your thumbnail has been generated successfully! \uD83C\uDF89",result:{image_url:e.thumbnail_url,processing_time:e.processing_time}}:"failed"===e.status?{...t,status:"failed",content:"Generation failed: ".concat(e.error_message||"Unknown error")}:{...t,status:e.status,content:P(e.status,e.progress)}:t))})},[g]);let T=async e=>{if(e.preventDefault(),!s.trim()||h)return;let n={id:"user-".concat(Date.now()),content:s,type:"user",timestamp:new Date().toISOString(),status:"sent"};t(e=>[...e,n]),d(""),p({prompt:s},{onSuccess:e=>{let s=e.data.generation_id;b(s);let n={id:"processing-".concat(s),content:"Starting thumbnail generation...",type:"system",timestamp:new Date().toISOString(),status:"processing",generationId:s};t(e=>[...e,n])}})},P=(e,t)=>({queued:"Your request is in queue...",processing:"Generating your thumbnail with AI...",completed:"Generation completed successfully!",failed:"Generation failed. Please try again."})[e]||"Processing... ".concat(t,"%"),F=0===e.length;return(0,n.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-gradient-main -z-10"}),(0,n.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[(0,n.jsx)(r.E.div,{className:"absolute w-96 h-96 bg-purple-300/30 rounded-full blur-3xl",animate:{x:[0,100,0],y:[0,-100,0]},transition:{duration:20,repeat:1/0},style:{top:"10%",left:"20%"}}),(0,n.jsx)(r.E.div,{className:"absolute w-96 h-96 bg-blue-300/30 rounded-full blur-3xl",animate:{x:[0,-100,0],y:[0,100,0]},transition:{duration:25,repeat:1/0},style:{bottom:"10%",right:"20%"}})]}),(0,n.jsxs)("div",{className:"container max-w-4xl mx-auto px-4 py-8 flex flex-col h-screen",children:[(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[(0,n.jsx)(o.W,{className:"px-6 py-3",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(c.T,{className:"w-8 h-8"}),(0,n.jsx)("span",{className:"font-bold text-text-primary text-lg",children:"Routix"}),(0,n.jsx)("span",{className:"text-text-muted text-sm",children:"AI Thumbnail Generator"})]})}),(0,n.jsx)(o.W,{className:"px-4 py-2",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Z,{className:"w-4 h-4 text-green-500"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"Connected"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Z,{className:"w-4 h-4 text-red-500"}),(0,n.jsx)("span",{className:"text-sm text-red-600",children:"Disconnected"})]})})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto mb-6 px-2",children:F?(0,n.jsxs)(r.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center h-full space-y-8",children:[(0,n.jsx)(r.E.div,{className:"w-20 h-20 rounded-3xl bg-white/80 backdrop-blur-xl shadow-lg flex items-center justify-center",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(0,n.jsx)(c.T,{className:"w-12 h-12"})}),(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-center space-y-2",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold text-text-primary",children:"Hey there! \uD83D\uDC4B"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-text-primary",children:"How can I help you today?"}),(0,n.jsx)("p",{className:"text-text-secondary text-lg",children:"I'm ready to create amazing thumbnails for you"})]}),(0,n.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex justify-center gap-3 flex-wrap",children:[(0,n.jsx)(q,{icon:"\uD83C\uDFAE",label:"Gaming Thumbnail",onClick:()=>d("Create an epic gaming thumbnail with explosion effects")}),(0,n.jsx)(q,{icon:"\uD83D\uDCA1",label:"Tech Tutorial",onClick:()=>d("Design a professional tutorial thumbnail")}),(0,n.jsx)(q,{icon:"\uD83C\uDFA8",label:"Creative Design",onClick:()=>d("Make a creative and unique thumbnail")})]})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(i.M,{children:e.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)(f,{message:e}),e.generationId&&"processing"===e.status&&(0,n.jsx)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 ml-14",children:(()=>{let t=E(e.generationId);return t?(0,n.jsx)(j,{progress:t}):null})()})]},e.id))}),(0,n.jsx)("div",{ref:u})]})}),(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[(0,n.jsx)("form",{onSubmit:T,children:(0,n.jsx)(o.W,{className:"p-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("button",{type:"button",className:"p-2 rounded-xl hover:bg-white/30 transition-colors",title:"Add image",children:(0,n.jsx)(N.Z,{className:"w-5 h-5 text-text-muted"})}),(0,n.jsx)("button",{type:"button",className:"p-2 rounded-xl hover:bg-white/30 transition-colors",title:"Attach file",children:(0,n.jsx)(k.Z,{className:"w-5 h-5 text-text-muted"})})]}),(0,n.jsx)("input",{ref:x,type:"text",value:s,onChange:e=>d(e.target.value),placeholder:"Describe your thumbnail idea...",className:"flex-1 bg-transparent border-none outline-none px-4 py-3 text-text-primary placeholder:text-text-muted",disabled:h}),(0,n.jsx)(l.O,{type:"submit",className:"px-4 py-2 rounded-2xl",disabled:!s.trim()||h,children:h?(0,n.jsx)(m.Z,{className:"w-5 h-5 animate-spin"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"font-medium mr-2",children:"Send"}),(0,n.jsx)(_.Z,{className:"w-5 h-5"})]})})]})})}),(0,n.jsx)(r.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center text-text-muted text-sm mt-2",children:"Describe your thumbnail in detail for better results"})]})]})]})}function q(e){let{icon:t,label:s,onClick:a}=e;return(0,n.jsx)(r.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"group",children:(0,n.jsx)(o.W,{className:"px-4 py-3 hover:bg-white/50 transition-all duration-200",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)("span",{className:"text-2xl",children:t}),(0,n.jsx)("span",{className:"text-sm text-text-secondary font-medium group-hover:text-text-primary transition-colors",children:s})]})})})}},3907:function(e,t,s){s.d(t,{W:function(){return i}});var n=s(7437),a=s(7440),r=s(4539);function i(e){let{children:t,className:s,hover:i=!1,...o}=e;return(0,n.jsx)(r.E.div,{className:(0,a.cn)("glass rounded-3xl shadow-glass",i&&"hover:shadow-glass-hover hover:scale-[1.01] cursor-pointer",s),...o,children:t})}},8145:function(e,t,s){s.d(t,{O:function(){return o}});var n=s(7437),a=s(4539),r=s(7440),i=s(4109);function o(e){let{children:t,className:s,loading:o=!1,variant:l="primary",disabled:c,...d}=e;return(0,n.jsx)(a.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:(0,r.cn)("relative px-6 py-3 rounded-2xl font-semibold text-white","shadow-button transition-all duration-200","disabled:opacity-50 disabled:cursor-not-allowed","primary"===l&&"bg-gradient-purple hover:shadow-button-hover","secondary"===l&&"bg-gradient-blue hover:shadow-button-hover",s),disabled:c||o,...d,children:o?(0,n.jsxs)("span",{className:"flex items-center justify-center",children:[(0,n.jsx)(i.Z,{className:"w-5 h-5 animate-spin mr-2"}),"Loading..."]}):t})}},9581:function(e,t,s){s.d(t,{T:function(){return a}});var n=s(7437);function a(e){let{className:t="w-12 h-12"}=e;return(0,n.jsx)("svg",{className:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"font-bold fill-routix-purple",fontSize:"48",children:"RK"})})}},4388:function(e,t,s){s.d(t,{O:function(){return c}});var n=s(7437),a=s(4539),r=s(933),i=s(4109),o=s(5862),l=s(7515);function c(e){let{status:t,className:s}=e,c=(()=>{switch(t){case"queued":return{icon:r.Z,text:"Queued",bgColor:"bg-blue-500/20",textColor:"text-blue-600",borderColor:"border-blue-500/30"};case"processing":return{icon:i.Z,text:"Processing",bgColor:"bg-routix-purple/20",textColor:"text-routix-purple",borderColor:"border-routix-purple/30",animate:!0};case"completed":return{icon:o.Z,text:"Completed",bgColor:"bg-green-500/20",textColor:"text-green-600",borderColor:"border-green-500/30"};case"failed":return{icon:l.Z,text:"Failed",bgColor:"bg-red-500/20",textColor:"text-red-600",borderColor:"border-red-500/30"};default:return{icon:r.Z,text:"Unknown",bgColor:"bg-gray-500/20",textColor:"text-gray-600",borderColor:"border-gray-500/30"}}})(),d=c.icon;return(0,n.jsxs)(a.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"\n        inline-flex items-center gap-2 px-3 py-1.5 rounded-full border\n        ".concat(c.bgColor," ").concat(c.textColor," ").concat(c.borderColor,"\n        ").concat(s,"\n      "),children:[(0,n.jsx)(d,{className:"w-4 h-4 ".concat(c.animate?"animate-spin":"")}),(0,n.jsx)("span",{className:"text-sm font-medium",children:c.text})]})}},6264:function(e,t,s){s.d(t,{x:function(){return i}});var n=s(8472),a=s(7776);let r=n.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},timeout:3e4});r.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{var t,s,i;let o=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!o._retry){o._retry=!0;try{let e=localStorage.getItem("refresh_token"),{data:t}=await n.Z.post("".concat("http://localhost:8000","/api/v1/auth/refresh"),{refresh_token:e});return localStorage.setItem("access_token",t.access_token),r.defaults.headers.common.Authorization="Bearer ".concat(t.access_token),r(o)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}let l=(null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.detail)||e.message||"An error occurred";return a.Am.error(l),Promise.reject(e)});let i={register:e=>r.post("/api/v1/users/register",e),login:e=>r.post("/api/v1/users/login",e),getProfile:()=>r.get("/api/v1/users/profile"),updateProfile:e=>r.put("/api/v1/users/profile",e),getCredits:()=>r.get("/api/v1/users/credits"),getConversations:()=>r.get("/api/v1/chat/conversations"),createConversation:()=>r.post("/api/v1/chat/conversations"),getMessages:e=>r.get("/api/v1/chat/conversations/".concat(e,"/messages")),sendMessage:(e,t)=>r.post("/api/v1/chat/conversations/".concat(e,"/messages"),t),getAlgorithms:()=>r.get("/api/v1/generation/algorithms"),createGeneration:e=>r.post("/api/v1/generation/create",e),getGenerationStatus:e=>r.get("/api/v1/generation/".concat(e,"/status")),getGenerationResult:e=>r.get("/api/v1/generation/".concat(e,"/result")),getHistory:e=>r.get("/api/v1/generations/user",{params:e}),uploadTemplate:e=>r.post("/api/v1/templates/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),getTemplates:e=>r.get("/api/v1/templates",{params:e}),searchTemplates:e=>r.get("/api/v1/templates/search",{params:{query:e}}),deleteTemplate:e=>r.delete("/api/v1/templates/".concat(e)),updateTemplate:(e,t)=>r.put("/api/v1/templates/".concat(e),t),downloadGeneration:e=>r.get("/api/v1/generations/".concat(e,"/download"),{responseType:"blob"}),shareGeneration:(e,t)=>r.post("/api/v1/generations/".concat(e,"/share"),t),favoriteGeneration:e=>r.post("/api/v1/generations/".concat(e,"/favorite")),unfavoriteGeneration:e=>r.delete("/api/v1/generations/".concat(e,"/favorite")),deleteGeneration:e=>r.delete("/api/v1/generations/".concat(e)),getAdminStats:()=>r.get("/api/v1/admin/stats"),getUsers:e=>r.get("/api/v1/admin/users",{params:e}),updateUser:(e,t)=>r.put("/api/v1/admin/users/".concat(e),t),getAnalytics:e=>r.get("/api/v1/admin/analytics",{params:e}),getRecentActivity:()=>r.get("/api/v1/admin/activity")}},7651:function(e,t,s){s.d(t,{AuthProvider:function(){return c},a:function(){return d},i:function(){return u}});var n=s(7437),a=s(2265),r=s(6463),i=s(6264),o=s(7776);let l=(0,a.createContext)(null);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),m=(0,r.useRouter)();(0,a.useEffect)(()=>{localStorage.getItem("access_token")?g():u(!1)},[]);let x=async(e,t)=>{try{let{data:s}=await i.x.login({username:e,password:t});localStorage.setItem("access_token",s.access_token),localStorage.setItem("refresh_token",s.refresh_token),await g(),o.Am.success("Welcome back!"),m.push("/chat")}catch(e){var s,n;throw o.Am.error((null===(n=e.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.detail)||"Login failed"),e}},p=async e=>{try{await i.x.register(e),o.Am.success("Account created successfully! Please log in."),m.push("/login")}catch(e){var t,s;throw o.Am.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Registration failed"),e}},h=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null),m.push("/login"),o.Am.success("Logged out successfully")},g=async()=>{try{let{data:e}=await i.x.getProfile();c(e)}catch(e){h()}finally{u(!1)}};return(0,n.jsx)(l.Provider,{value:{user:s,loading:d,login:x,register:p,logout:h,refreshUser:g},children:t})}function d(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuth must be used within AuthProvider");return e}function u(e){let{children:t}=e,{user:s,loading:i}=d(),o=(0,r.useRouter)();return((0,a.useEffect)(()=>{i||s||o.push("/login")},[s,i,o]),i)?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-main flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-16 h-16 rounded-3xl bg-white/80 backdrop-blur-xl shadow-lg flex items-center justify-center animate-pulse",children:(0,n.jsx)("div",{className:"w-8 h-8 bg-routix-purple/20 rounded-xl"})})}):s?(0,n.jsx)(n.Fragment,{children:t}):null}},7440:function(e,t,s){s.d(t,{cn:function(){return r}});var n=s(4839),a=s(6164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,n.W)(t))}}}]);