(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{4678:function(e,t,a){Promise.resolve().then(a.bind(a,5825))},5825:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(7437),n=a(2265),r=a(4539),i=a(7651),l=a(3907),o=a(9581),c=a(1066);let d=(0,c.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=a(3674),h=a(1240);let m=(0,c.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),p=(0,c.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var v=a(4697);let g=(0,c.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var f=a(7138),y=a(6463);let b=[{href:"/admin",icon:d,label:"Dashboard"},{href:"/admin/templates",icon:u.Z,label:"Templates"},{href:"/admin/users",icon:h.Z,label:"Users"},{href:"/admin/analytics",icon:m,label:"Analytics"},{href:"/admin/settings",icon:p,label:"Settings"}];function j(e){var t,a;let{children:c}=e,{user:d,logout:u}=(0,i.a)(),h=(0,y.usePathname)(),[m,p]=(0,n.useState)(!1);return(null==d?void 0:d.role)==="admin"||(null==d?void 0:d.role)==="super_admin"?(0,s.jsx)(i.i,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-main",children:[(0,s.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden pointer-events-none",children:[(0,s.jsx)(r.E.div,{className:"absolute w-96 h-96 bg-purple-300/20 rounded-full blur-3xl",animate:{x:[0,100,0],y:[0,-100,0]},transition:{duration:20,repeat:1/0},style:{top:"10%",left:"20%"}}),(0,s.jsx)(r.E.div,{className:"absolute w-96 h-96 bg-blue-300/20 rounded-full blur-3xl",animate:{x:[0,-100,0],y:[0,100,0]},transition:{duration:25,repeat:1/0},style:{bottom:"10%",right:"20%"}})]}),(0,s.jsxs)("div",{className:"flex h-screen",children:[(0,s.jsx)(r.E.div,{initial:{x:-300},animate:{x:m?0:-300},className:"fixed inset-y-0 left-0 z-50 w-64 lg:relative lg:translate-x-0 lg:block",children:(0,s.jsxs)(l.W,{className:"h-full rounded-none lg:rounded-r-3xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,s.jsx)(o.T,{className:"w-8 h-8"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-bold text-text-primary",children:"Routix Admin"}),(0,s.jsx)("p",{className:"text-sm text-text-muted",children:"Management Panel"})]})]}),(0,s.jsx)("nav",{className:"space-y-2 mb-8",children:b.map(e=>{let t=h===e.href;return(0,s.jsx)(f.default,{href:e.href,children:(0,s.jsxs)(r.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"\n                          flex items-center gap-3 px-4 py-3 rounded-2xl transition-all\n                          ".concat(t?"bg-gradient-purple text-white shadow-button":"hover:bg-white/20 text-text-primary","\n                        "),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]})},e.href)})}),(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsxs)(l.W,{className:"p-4 bg-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-purple flex items-center justify-center text-white font-bold",children:null==d?void 0:null===(a=d.username)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-text-primary",children:null==d?void 0:d.username}),(0,s.jsx)("p",{className:"text-sm text-text-muted capitalize",children:null==d?void 0:d.role})]})]}),(0,s.jsxs)("button",{onClick:u,className:"flex items-center gap-2 w-full px-3 py-2 rounded-xl hover:bg-white/20 transition-colors text-text-secondary hover:text-text-primary",children:[(0,s.jsx)(x,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm",children:"Logout"})]})]})})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,s.jsx)("header",{className:"p-6 lg:p-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>p(!m),className:"lg:hidden p-2 rounded-xl hover:bg-white/20 transition-colors",children:m?(0,s.jsx)(v.Z,{className:"w-6 h-6 text-text-primary"}):(0,s.jsx)(g,{className:"w-6 h-6 text-text-primary"})}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)(l.W,{className:"px-4 py-2",children:(0,s.jsxs)("span",{className:"text-sm text-text-secondary",children:["Welcome back, ",(0,s.jsx)("span",{className:"font-semibold text-text-primary",children:null==d?void 0:d.username})]})})})]})}),(0,s.jsx)("main",{className:"flex-1 px-6 lg:px-8 pb-8 overflow-auto",children:c})]})]}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>p(!1)})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-main flex items-center justify-center p-4",children:(0,s.jsxs)(l.W,{className:"p-8 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-text-secondary",children:"You don't have permission to access the admin panel."})]})})}},3907:function(e,t,a){"use strict";a.d(t,{W:function(){return i}});var s=a(7437),n=a(7440),r=a(4539);function i(e){let{children:t,className:a,hover:i=!1,...l}=e;return(0,s.jsx)(r.E.div,{className:(0,n.cn)("glass rounded-3xl shadow-glass",i&&"hover:shadow-glass-hover hover:scale-[1.01] cursor-pointer",a),...l,children:t})}},9581:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var s=a(7437);function n(e){let{className:t="w-12 h-12"}=e;return(0,s.jsx)("svg",{className:t,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"font-bold fill-routix-purple",fontSize:"48",children:"RK"})})}},6264:function(e,t,a){"use strict";a.d(t,{x:function(){return i}});var s=a(8472),n=a(7776);let r=s.Z.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"},timeout:3e4});r.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,async e=>{var t,a,i;let l=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let e=localStorage.getItem("refresh_token"),{data:t}=await s.Z.post("".concat("http://localhost:8000","/api/v1/auth/refresh"),{refresh_token:e});return localStorage.setItem("access_token",t.access_token),r.defaults.headers.common.Authorization="Bearer ".concat(t.access_token),r(l)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}let o=(null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.detail)||e.message||"An error occurred";return n.Am.error(o),Promise.reject(e)});let i={register:e=>r.post("/api/v1/users/register",e),login:e=>r.post("/api/v1/users/login",e),getProfile:()=>r.get("/api/v1/users/profile"),updateProfile:e=>r.put("/api/v1/users/profile",e),getCredits:()=>r.get("/api/v1/users/credits"),getConversations:()=>r.get("/api/v1/chat/conversations"),createConversation:()=>r.post("/api/v1/chat/conversations"),getMessages:e=>r.get("/api/v1/chat/conversations/".concat(e,"/messages")),sendMessage:(e,t)=>r.post("/api/v1/chat/conversations/".concat(e,"/messages"),t),getAlgorithms:()=>r.get("/api/v1/generation/algorithms"),createGeneration:e=>r.post("/api/v1/generation/create",e),getGenerationStatus:e=>r.get("/api/v1/generation/".concat(e,"/status")),getGenerationResult:e=>r.get("/api/v1/generation/".concat(e,"/result")),getHistory:e=>r.get("/api/v1/generations/user",{params:e}),uploadTemplate:e=>r.post("/api/v1/templates/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),getTemplates:e=>r.get("/api/v1/templates",{params:e}),searchTemplates:e=>r.get("/api/v1/templates/search",{params:{query:e}}),deleteTemplate:e=>r.delete("/api/v1/templates/".concat(e)),updateTemplate:(e,t)=>r.put("/api/v1/templates/".concat(e),t),downloadGeneration:e=>r.get("/api/v1/generations/".concat(e,"/download"),{responseType:"blob"}),shareGeneration:(e,t)=>r.post("/api/v1/generations/".concat(e,"/share"),t),favoriteGeneration:e=>r.post("/api/v1/generations/".concat(e,"/favorite")),unfavoriteGeneration:e=>r.delete("/api/v1/generations/".concat(e,"/favorite")),deleteGeneration:e=>r.delete("/api/v1/generations/".concat(e)),getAdminStats:()=>r.get("/api/v1/admin/stats"),getUsers:e=>r.get("/api/v1/admin/users",{params:e}),updateUser:(e,t)=>r.put("/api/v1/admin/users/".concat(e),t),getAnalytics:e=>r.get("/api/v1/admin/analytics",{params:e}),getRecentActivity:()=>r.get("/api/v1/admin/activity")}},7651:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return c},a:function(){return d},i:function(){return u}});var s=a(7437),n=a(2265),r=a(6463),i=a(6264),l=a(7776);let o=(0,n.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0),h=(0,r.useRouter)();(0,n.useEffect)(()=>{localStorage.getItem("access_token")?v():u(!1)},[]);let m=async(e,t)=>{try{let{data:a}=await i.x.login({username:e,password:t});localStorage.setItem("access_token",a.access_token),localStorage.setItem("refresh_token",a.refresh_token),await v(),l.Am.success("Welcome back!"),h.push("/chat")}catch(e){var a,s;throw l.Am.error((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.detail)||"Login failed"),e}},p=async e=>{try{await i.x.register(e),l.Am.success("Account created successfully! Please log in."),h.push("/login")}catch(e){var t,a;throw l.Am.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail)||"Registration failed"),e}},x=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),c(null),h.push("/login"),l.Am.success("Logged out successfully")},v=async()=>{try{let{data:e}=await i.x.getProfile();c(e)}catch(e){x()}finally{u(!1)}};return(0,s.jsx)(o.Provider,{value:{user:a,loading:d,login:m,register:p,logout:x,refreshUser:v},children:t})}function d(){let e=(0,n.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}function u(e){let{children:t}=e,{user:a,loading:i}=d(),l=(0,r.useRouter)();return((0,n.useEffect)(()=>{i||a||l.push("/login")},[a,i,l]),i)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-main flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-3xl bg-white/80 backdrop-blur-xl shadow-lg flex items-center justify-center animate-pulse",children:(0,s.jsx)("div",{className:"w-8 h-8 bg-routix-purple/20 rounded-xl"})})}):a?(0,s.jsx)(s.Fragment,{children:t}):null}},7440:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(4839),n=a(6164);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}},3674:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1066).Z)("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]])},1240:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1066).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4697:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[341,314,291,971,23,744],function(){return e(e.s=4678)}),_N_E=e.O()}]);